<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario Datos de Ley</title>
    <style>
      /*
       * Este archivo CSS contiene los estilos consolidados y mejorados
       * para los documentos del proyecto (Indicativo Estaciones, Directorio Principal, Formulario Datos de Ley, etc.).
       *
       * Incluye:
       * - Importación de fuentes externas (Roboto y Poppins).
       * - Un reset básico para asegurar consistencia entre navegadores.
       * - Estilos generales del cuerpo de la página y contenedores principales.
       * - Estilos específicos de la cabecera y su navegación.
       * - Estilos para diferentes niveles de encabezados (h1, h2, h3, h4) con una jerarquía visual clara.
       * - Estilos para listas (ordenadas y no ordenadas, incluyendo la lista de botones del directorio).
       * - Estilos para botones con un diseño específico y responsivo.
       * - Estilos para elementos de formulario (inputs, labels, selects, textareas, y estructura del formulario).
       * - Estilos para una galería de imágenes.
       * - Media Queries para adaptar el diseño a diferentes tamaños de pantalla (móviles, tablets, escritorio).
       *
       * Se ha utilizado una paleta de colores basada en azules con un color de acento (rojo)
       * y tipografía (Poppins para títulos, Roboto para cuerpo) para una apariencia coherente y agradable.
       * Se han realizado ajustes para mejorar el bloque de botones del index principal
       * y se han corregido problemas de espaciado y diferenciación en las entradas dinámicas del formulario.
       */

      /* --- Importación de Fuentes de Google --- */
      @import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,800;1,900&display=swap');
      @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');


      /* --- Clases de Fuente --- */
      .roboto-thin { font-family: "Roboto", serif; font-weight: 100; font-style: normal; }
      .roboto-light { font-family: "Roboto", serif; font-weight: 300; font-style: normal; }
      .roboto-regular { font-family: "Roboto", serif; font-weight: 400; font-style: normal; }
      .roboto-medium { font-family: "Roboto", serif; font-weight: 500; font-style: normal; }
      .roboto-bold { font-family: "Roboto", serif; font-weight: 700; font-style: normal; }
      .roboto-black { font-family: "Roboto", serif; font-weight: 900; font-style: normal; }
      .roboto-thin-italic { font-family: "Roboto", serif; font-weight: 100; font-style: italic; }
      .roboto-light-italic { font-family: "Roboto", serif; font-weight: 300; font-style: italic; }
      .roboto-regular-italic { font-family: "Roboto", serif; font-weight: 400; font-style: italic; }
      .roboto-medium-italic { font-family: "Roboto", serif; font-weight: 500; font-style: italic; }
      .roboto-bold-italic { font-family: "Roboto", serif; font-weight: 700; font-style: italic; }
      .roboto-black-italic { font-family: "Roboto", serif; font-weight: 900; font-style: italic; }
      .poppins-thin { font-family: "Poppins", serif; font-weight: 100; font-style: normal; }
      .poppins-extralight { font-family: "Poppins", serif; font-weight: 200; font-style: normal; }
      .poppins-light { font-family: "Poppins", serif; font-weight: 300; font-style: normal; }
      .poppins-regular { font-family: "Poppins", serif; font-weight: 400; font-style: normal; }
      .poppins-medium { font-family: "Poppins", serif; font-weight: 500; font-style: normal; }
      .poppins-semibold { font-family: "Poppins", serif; font-weight: 600; font-style: normal; }
      .poppins-bold { font-family: "Poppins", serif; font-weight: 700; font-style: normal; }
      .poppins-extrabold { font-family: "Poppins", serif; font-weight: 800; font-style: normal; }
      .poppins-black { font-family: "Poppins", serif; font-weight: 900; font-style: normal; }
      .poppins-thin-italic { font-family: "Poppins", serif; font-weight: 100; font-style: italic; }
      .poppins-extralight-italic { font-family: "Poppins", serif; font-weight: 200; font-style: italic; }
      .poppins-light-italic { font-family: "Poppins", serif; font-weight: 300; font-style: italic; }
      .poppins-regular-italic { font-family: "Poppins", serif; font-weight: 400; font-style: italic; }
      .poppins-medium-italic { font-family: "Poppins", serif; font-weight: 500; font-style: italic; }
      .poppins-semibold-italic { font-family: "Poppins", serif; font-weight: 600; font-style: italic; }
      .poppins-bold-italic { font-family: "Poppins", serif; font-weight: 700; font-style: italic; }
      .poppins-extrabold-italic { font-family: "Poppins", serif; font-weight: 800; font-style: italic; }
      .poppins-black-italic { font-family: "Poppins", serif; font-weight: 900; font-style: italic; }

      /* --- Reset Básico --- */
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      html {
          scroll-behavior: smooth;
      }

      /* --- Estilos Generales del Cuerpo y Contenedores --- */
      body {
          font-family: "Roboto", Arial, sans-serif;
          margin: 10px;
          background-color: #f8f9fa;
          color: #212529;
          line-height: 1.6;
          font-size: 1em;
      }

      img {
          max-width: 100%;
          height: auto;
          display: block;
      }

      .container { /* Estilo para contenedores generales tipo tarjeta */
          background-color: #fff;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
          margin-bottom: 25px;
      }

      section { /* Fondo sutil para secciones */
          background: rgba(0, 123, 255, 0.05);
          padding: 15px;
          margin-bottom: 20px;
          border-radius: 8px;
      }

      .linea { /* Estilo para una línea o divisor específico */
          height: 100%;
          width: 100%;
          background-color: #007bff;
      }

      u { /* Estilo para la etiqueta de subrayado */
          text-decoration: underline;
      }

      /* --- Estilos de Cabecera --- */
      header {
          background: linear-gradient(90deg, #007bff 0%, #0a58ca 47%, #007bff 87%);
          border-radius: 15px;
          color: rgb(255, 255, 255);
          padding: 15px 10px;
          margin-bottom: 30px;
          text-align: center;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
      }

      header .datos { /* Estilo para el h1 dentro de la cabecera */
          font-family: "Poppins", sans-serif;
          font-size: 2em;
          margin: 0 0 10px 0;
          padding: 0;
          font-weight: 700;
      }

      header .nav_1 { /* Contenedor de enlaces de navegación en la cabecera */
          padding: 0;
          background: rgba(0, 123, 255, 0.1);
          border-radius: 5px;
          padding: 5px 0;
      }

      header .nav_1 a { /* Estilo para los enlaces de navegación */
          color: inherit;
          text-decoration: none;
          margin: 0 10px;
          font-size: 1em;
          transition: text-decoration 0.3s ease;
      }

      header .nav_1 a:hover {
          text-decoration: underline;
      }


      /* --- Estilos de Títulos --- */
      h1 { /* Estilo para h1 general y ahora el título del formulario */
          font-family: "Poppins", sans-serif;
          font-weight: 700;
          color: #007bff;
          text-align: center;
          padding: 15px 10px;
          margin-bottom: 25px;
          font-size: 2.2em;
          border-bottom: 2px solid #e9ecef;
      }

      /* Clase específica para el título del formulario para diferenciarlo del h1 general si es necesario */
      .form-title {
          font-family: "Poppins", sans-serif;
          font-size: 2em;
          font-weight: 600;
          color: #212529;
          text-align: center;
          margin-bottom: 25px;
          padding-bottom: 10px;
          border-bottom: 1px solid #dee2e6;
      }


      h2 { /* Estilo para títulos de sección general */
          font-family: "Poppins", sans-serif;
          font-weight: 600;
          color: #dc3545;
          border-bottom: 1px solid #dc3545;
          padding: 10px 0;
          margin-top: 25px;
          margin-bottom: 15px;
          font-size: 1.8em;
      }

      /* Estilo para títulos H2 dentro de las secciones del formulario */
      .form-section h2 {
          font-family: "Poppins", sans-serif;
          font-size: 1.5em;
          font-weight: 600;
          margin-bottom: 1.5rem;
          color: #212529;
          border-bottom: none;
          padding: 0;
      }

      /* Estilo para títulos H3 dentro de las entradas dinámicas (Víctima 1, Datos 954 2, etc.) */
      .victim-entry h3,
      .data954-entry h3 {
          font-family: "Poppins", sans-serif;
          font-size: 1.2em; /* Tamaño ligeramente menor */
          font-weight: 600;
          color: #007bff; /* Color azul primario */
          margin-bottom: 1rem; /* Espacio debajo del título */
          padding-bottom: 5px; /* Espacio interno */
          border-bottom: 1px solid rgba(0, 123, 255, 0.3); /* Borde inferior azul sutil */
      }


      h3 { /* Estilo para subtítulos de sección (general) - Aseguramos que no afecte a h3 dentro de entradas dinámicas */
          font-family: "Poppins", sans-serif;
          font-weight: 600;
          color: #0d6efd;
          border-bottom: 1px solid #0d6efd;
          padding: 8px 0;
          margin-top: 20px;
          margin-bottom: 10px;
          font-size: 1.5em;
      }
      h4 { /* Estilo para títulos de sub-subsección, etc. */
          font-family: "Poppins", sans-serif;
          font-weight: 500;
          color: #6c757d;
          border-bottom: 1px solid #6c757d;
          padding: 6px 0;
          margin-top: 15px;
          margin-bottom: 8px;
          font-size: 1.2em;
      }


      /* --- Estilos de Enlaces Genéricos --- */
      a {
          color: #007bff;
          text-decoration: none;
          transition: color 0.2s ease-in-out;
      }

      a:hover {
          color: #0a58ca;
          text-decoration: underline;
      }


      /* --- Estilos de Listas --- */
      /* Estilo para listas no ordenadas (usado en el directorio principal para los botones) */
      ul {
          list-style: none;
          padding: 0;
          margin: 0;
          display: flex;
          flex-wrap: wrap;
          gap: 20px; /* Aumentado el espacio entre botones */
          justify-content: center;
      }

      /* Estilo para cada elemento de lista no ordenada (contenedor de un botón) */
      ul li {
          margin-bottom: 0;
          display: block;
          flex-grow: 0;
          flex-shrink: 0;
          width: 100%; /* Base móvil */
          /* El ancho en pantallas más grandes se define en las media queries */
      }

      /* Estilo para listas ordenadas (usado en Indicativo Estaciones) */
      ol {
          padding-left: 20px;
      }

      /* Estilo para cada elemento de lista ordenada */
      ol li {
          margin-bottom: 8px;
          font-size: 1em;
          display: flex;
          align-items: center;
          flex-wrap: wrap;
          justify-content: space-between;
          gap: 5px;
          padding: 5px 0;
          border-bottom: 1px dashed #e9ecef;
      }

      /* Elimina el borde inferior del último elemento de la lista ordenada */
      ol li:last-child {
          border-bottom: none;
      }

      /* Espacio a la derecha del checkbox en la lista ordenada */
      ol li input[type="checkbox"] { margin-right: 8px; }


      /* --- Estilos de Botones (Responsivos con diseño mejorado) --- */
      /* Estilo general para el botón primario (usado en el formulario) */
      .btn-primary {
          display: inline-flex;
          align-items: center;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          background: linear-gradient(to bottom, #007bff 5%, #0a58ca 100%);
          background-color: #007bff;
          border: 1px solid #0a58ca;
          color: #fff;
          font-family: "Roboto", Arial, sans-serif;
          font-size: 1em;
          font-weight: 500;
          text-shadow: none;
          padding: 12px 20px;
          border-radius: 5px;
          cursor: pointer;
          transition: background-color 0.3s ease, box-shadow 0.3s ease, transform 0.15s ease-in-out;
      }

      /* Estilo de botón primario al pasar el ratón (hover) */
      .btn-primary:hover {
          background: linear-gradient(to bottom, #0a58ca 5%, #007bff 100%);
          background-color: #0a58ca;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
          transform: translateY(-1px);
      }

      /* Estilo de botón primario al ser activado (click) */
      .btn-primary:active {
          position:relative;
          top:1px;
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          transform: translateY(0);
      }

      /* Estilo para el botón secundario (ej: borrar datos en formulario, agregar/eliminar entradas) */
      .btn-secondary {
          display: inline-flex;
          align-items: center;
          padding: 12px 20px;
          font-size: 1em;
          font-weight: 500;
          color: #555;
          background-color: #e9ecef;
          border-radius: 5px;
          transition: background-color 0.3s ease, box-shadow 0.3s ease, transform 0.15s ease-in-out;
          cursor: pointer;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
          border: 1px solid #ced4da;
      }

      /* Estilo de botón secundario al pasar el ratón (hover) */
      .btn-secondary:hover {
          background-color: #dee2e6;
          box-shadow: 0 3px 6px rgba(0, 0, 0, 0.12);
          transform: translateY(-1px);
      }

      /* Estilo de botón secundario al ser activado (click) */
      .btn-secondary:active {
          position:relative;
          top:1px;
          background-color: #ced4da;
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.16);
          transform: translateY(0);
      }

      /* Estilo específico para los botones de agregar (+) */
      .btn-secondary.add-button {
          margin-top: 15px; /* Espacio arriba del botón agregar */
          width: auto; /* Ancho automático */
          text-align: center; /* Centra el texto */
          justify-content: center; /* Centra el contenido flex */
          display: flex; /* Asegura flex para centrado */
      }


      /* Estilo para los iconos dentro de los botones primarios y secundarios */
      .btn-primary .icon,
      .btn-secondary .icon {
          width: 1.2em;
          height: 1.2em;
          margin-right: 8px;
      }

      /* --- Estilos Específicos para los Botones en la Lista del Directorio Principal (ul li button) --- */
      ul {
          list-style: none;
          padding: 0;
          margin: 0;
          display: flex;
          flex-wrap: wrap;
          gap: 20px; /* Espacio entre elementos de la lista */
          justify-content: center;
      }

      ul li {
          margin-bottom: 0;
          display: block;
          flex-grow: 0;
          flex-shrink: 0;
          width: 100%; /* Base móvil */
          /* El ancho en pantallas más grandes se define en las media queries */
      }

      /* Estilo para el enlace (a) dentro del elemento de lista (li), actuando como botón */
      ul li a {
          display: flex; /* Usa flexbox para alinear icono y texto */
          align-items: center; /* Centra verticalmente el contenido */
          text-align: left; /* Alinea el texto a la izquierda */
          padding: 15px 25px; /* Espaciado interno */
          font-size: 1.1em; /* Tamaño de fuente */
          font-weight: 500; /* Grosor de la fuente */
          color: #fff; /* Color del texto */
          background: linear-gradient(to right, #007bff 0%, #0a58ca 100%); /* Fondo degradado */
          border: none; /* Sin borde */
          border-radius: 5px; /* Bordes redondeados */
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Sombra sutil */
          transition: background-color 0.3s ease, box-shadow 0.3s ease, transform 0.15s ease-in-out; /* Transiciones suaves */
          width: 100%; /* Asegura que el enlace ocupe todo el ancho del li */
          text-decoration: none; /* Elimina el subrayado por defecto del enlace */
      }

      /* Estilo del enlace al pasar el ratón (hover) */
      ul li a:hover {
          background: linear-gradient(to right, #0a58ca 0%, #007bff 100%);
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
          transform: translateY(-2px);
          text-decoration: none; /* Asegura que no aparezca subrayado en hover */
      }

      /* Estilo del enlace al ser activado (click) */
      ul li a:active {
          position:relative;
          top:0px;
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          transform: translateY(0);
      }

      /* Estilo para la imagen (icono) dentro del enlace */
      ul li a img {
          width: 25px; /* Tamaño del icono */
          height: auto;
          margin-right: 15px; /* Espacio a la derecha del icono */
          flex-shrink: 0; /* Evita que el icono se encoja */
      }

      /* Estilo para el texto dentro del enlace */
      ul li a span {
          flex-grow: 1; /* Permite que el texto ocupe el espacio restante */
          text-align: left; /* Asegura que el texto esté alineado a la izquierda */
          color: inherit; /* Hereda el color del enlace (blanco) */
      }


      /* Estilo para listas ordenadas (usado en Indicativo Estaciones) */
      ol {
          padding-left: 20px;
      }

      /* Estilo para cada elemento de lista ordenada */
      ol li {
          margin-bottom: 8px;
          font-size: 1em;
          display: flex;
          align-items: center;
          flex-wrap: wrap;
          justify-content: space-between;
          gap: 5px;
          padding: 5px 0;
          border-bottom: 1px dashed #e9ecef;
      }

      /* Elimina el borde inferior del último elemento de la lista ordenada */
      ol li:last-child {
          border-bottom: none;
      }

      /* Espacio a la derecha del checkbox en la lista ordenada */
      ol li input[type="checkbox"] { margin-right: 8px; }


      /* --- Estilos de Formularios --- */
      /* Estilo para el contenedor principal del formulario, usa los estilos de .container */
      .form-container {
          max-width: 800px;
          margin: auto;
          /* Padding, border-radius, box-shadow, margin-bottom vienen de .container */
      }

      /* Estilos para los contenedores de las entradas dinámicas (Víctima, Datos 954) */
      .victim-entry,
      .data954-entry {
          background-color: #eef2f6; /* Fondo gris azulado muy claro */
          border: 1px solid #ced4da; /* Borde gris claro */
          border-radius: 5px; /* Bordes redondeados */
          padding: 15px; /* Espaciado interno */
          margin-bottom: 20px; /* Espacio debajo de cada entrada */
      }

      /* Estilo para el separador horizontal dentro de las entradas dinámicas */
      .victim-entry hr,
      .data954-entry hr {
          border: none; /* Elimina el borde por defecto */
          height: 1px; /* Grosor de la línea */
          background-color: #dee2e6; /* Color gris suave */
          margin: 20px 0; /* Espacio vertical alrededor del separador */
      }


      /* Estilo para las secciones dentro del formulario */
      .form-section {
          margin-bottom: 2rem;
          padding-bottom: 1.5rem;
          border-bottom: 1px solid #dee2e6;
      }
      .form-section:last-child {
          margin-bottom: 0;
          padding-bottom: 0;
          border-bottom: none;
      }

      /* Estilo para los títulos H2 dentro de las secciones del formulario (se definió arriba) */


      /* Estilo para los grupos de campo (label + input) */
      .form-group {
          margin-bottom: 1rem; /* Reducido el espacio entre campos */
      }

      /* Estilo para las etiquetas de los campos del formulario */
      .form-group label {
          display: block;
          font-size: 0.875em;
          font-weight: 500;
          color: #495057;
          margin-bottom: 0.5rem;
          text-transform: uppercase;
      }

      /* Estilo general para campos de entrada de texto, select, textarea, etc. */
      .form-control {
          display: block;
          width: 100%;
          padding: 0.75rem;
          font-size: 1em;
          font-family: "Roboto", Arial, sans-serif;
          border: 1px solid #ced4da;
          border-radius: 0.375rem;
          color: #495057;
          background-color: #fff;
          transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
      }

      /* Estilo para campos al enfocar */
      .form-control:focus {
          outline: none;
          border-color: #80bdff;
          box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
      }

      /* Estilos específicos para los campos de selección (select) */
      .form-select {
           display: block;
           width: 100%;
           padding: 0.75rem 2.5rem 0.75rem 0.75rem;
           font-size: 1em;
           font-family: "Roboto", Arial, sans-serif;
           color: #495057;
           background-color: #fff;
           border: 1px solid #ced4da;
           border-radius: 0.375rem;
           appearance: none;
           /* Flecha personalizada con SVG base64 */
           background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none' stroke='%23343a40' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3cpath d='M6 9l4 4 4-4'%3e%3c/path%3e%3c/svg%3e");
           background-repeat: no-repeat;
           background-position: right 0.75rem center;
           background-size: 1rem;
           transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
      }

      /* Estilo para select al enfocar */
      .form-select:focus {
          outline: none;
          border-color: #80bdff;
          box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
      }

      /* Estilo para el área de texto (textarea) */
      .textarea {
          resize: vertical;
          min-height: 4rem;
          /* Otros estilos heredados de .form-control */
      }

      /* Estilo para el grupo de botones de acción del formulario */
      .button-group {
          display: flex;
          justify-content: space-between;
          gap: 15px;
          margin-top: 1rem;
          flex-wrap: wrap;
      }

      .button-group .btn-primary,
      .button-group .btn-secondary {
          flex-grow: 1;
          text-align: center;
          justify-content: center;
      }


      /* --- Estilos de Previsualización --- */
      .preview-container {
          background-color: #e9ecef;
          border: 1px solid #dee2e6;
          border-radius: 0.375rem;
          padding: 1rem;
          margin-top: 1.5rem;
      }

      .preview-title {
          font-family: "Poppins", sans-serif;
          font-size: 1.2em;
          font-weight: 600;
          color: #343a40;
          margin-bottom: 0.75rem;
      }

      #preview {
          width: 100%;
          min-height: 8rem;
          resize: vertical;
          font-family: monospace;
          font-size: 0.875em;
          color: #495057;
          border: none;
          background-color: transparent;
          padding: 0;
          outline: none;
          display: block;
      }


      /* --- Estilos de Galería de Imágenes --- */
      .gallery {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 20px;
          padding: 0;
          margin-top: 20px;
      }

      .img-container {
          overflow: hidden;
          border-radius: 8px;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
          background-color: #fff;
          padding: 5px;
      }

      .img-container img {
          display: block;
          width: 100%;
          height: auto;
          transition: transform 0.3s ease;
          border-radius: 4px;
      }

      .img-container img:hover {
          transform: scale(1.05);
      }


      /* --- Media Queries para Responsividad --- */

      /* Pantallas pequeñas (max-width: 600px) */
      @media (max-width: 600px) {
          body {
              margin: 5px;
              font-size: 0.9em;
          }
          .container {
              padding: 15px;
              margin-bottom: 20px;
          }
          section {
               padding: 10px;
               margin-bottom: 20px;
          }
          h1 { font-size: 1.8em; padding: 10px 8px; margin-bottom: 20px; }
          .form-title { font-size: 1.6em; margin-bottom: 20px; padding-bottom: 8px; }
          h2 { font-size: 1.4em; padding: 8px 0; margin-top: 20px; margin-bottom: 10px; }
          /* .form-section h2 styles are fine here */

          /* Ajuste tamaño y margen de h3 en entradas dinámicas en móvil */
          .victim-entry h3,
          .data954-entry h3 {
              font-size: 1.1em;
              margin-bottom: 0.8rem;
          }

          h3 { font-size: 1.2em; padding: 6px 0; margin-top: 15px; margin-bottom: 8px; }
          h4 { font-size: 1.1em; padding: 4px 0; margin-top: 10px; margin-bottom: 6px; }

          /* ul li ya tiene width: 100% por defecto */
          ul li {
             width: 100%;
          }
          ul li a { /* Estilo para el enlace (a) dentro del li, actuando como botón en móvil */
              padding: 12px 20px;
              font-size: 1em;
          }
           ul li a img { /* Estilo para el icono dentro del enlace en móvil */
              width: 20px;
              margin-right: 10px;
           }

          /* Ajustes para la cabecera en móviles */
          header {
              border-radius: 10px;
              padding: 10px;
              margin-bottom: 25px;
          }
          header .datos {
              font-size: 1.6em;
              margin-bottom: 5px;
          }
          header .nav_1 {
              padding: 3px 0;
          }
          header .nav_1 a {
              margin: 0 5px;
              font-size: 0.9em;
          }

          /* Ajustes para elementos de lista ordenada en móviles (apilados) */
          ol { padding-left: 15px; }
          ol li {
              font-size: 0.9em;
              flex-direction: column;
              align-items: flex-start;
              gap: 3px;
              padding: 5px 0;
          }
          ol li input[type="checkbox"] { margin-bottom: 5px; }

          /* Ajustes para select y textareas en móviles */
          .funcionario-select {
              width: 100%;
              min-width: unset;
              flex-grow: unset;
              margin-top: 5px;
              font-size: 0.9em;
              padding: 6px;
          }
          #listaFuncionarios, #consignasNovedades {
               min-height: 80px;
               font-size: 0.9em;
               padding: 8px;
          }
           #consignasNovedades {
              min-height: 100px;
           }

           /* Ajuste para la etiqueta de la estación en móviles */
          .station-label {
              margin-right: 0;
              width: 100%;
              margin-bottom: 5px;
          }
           /* Ajuste específico para el título #indes en móviles */
           #indes {
               font-size: 1.4em;
               margin-bottom: 15px;
               padding-bottom: 5px;
           }
            .linea-info {
               font-size: 0.8em;
           }

           /* Ajustes para la galería en móviles */
           .gallery {
               grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
               gap: 10px;
               margin-top: 15px;
           }
            .img-container {
               padding: 3px;
            }
            .img-container img:hover {
              transform: scale(1.03);
           }

           /* Ajustes para elementos de formulario en móviles */
           .form-container {
               padding: 15px;
           }
           /* Ajuste padding y margin-bottom de entradas dinámicas en móvil */
           .victim-entry,
           .data954-entry {
               padding: 10px;
               margin-bottom: 15px;
           }
           /* Ajuste margen separador hr en móvil */
           .victim-entry hr,
           .data954-entry hr {
               margin: 15px 0;
           }

           .form-section {
               margin-bottom: 1.5rem;
               padding-bottom: 1rem;
           }
           /* form-section h2 size adjusted above */
           .form-group {
               margin-bottom: 0.8rem; /* Reducido aún más en móvil */
           }
           .form-group label {
               font-size: 0.8em;
               margin-bottom: 0.3rem;
           }
           .form-control, .form-select, .textarea {
               font-size: 0.9em;
               padding: 0.6rem;
           }
            .form-select {
               padding-right: 2rem;
               background-position: right 0.5rem center;
               background-size: 0.9rem;
            }
            .btn-primary, .btn-secondary {
               font-size: 0.95em;
               padding: 10px 15px;
            }
            .btn-primary .icon, .btn-secondary .icon {
               width: 1em;
               height: 1em;
               margin-right: 6px;
            }
            /* Ajuste grupo de botones del formulario en móvil */
            .button-group {
                 flex-direction: column;
                 gap: 10px;
            }
            .button-group .btn-primary,
            .button-group .btn-secondary {
                 width: 100%;
                 text-align: center;
                 justify-content: center;
            }
           /* Ajuste botón agregar en móvil */
           .btn-secondary.add-button {
               margin-top: 10px;
           }


            .preview-title {
               font-size: 1em;
               margin-bottom: 0.5rem;
            }
            #preview {
               font-size: 0.8em;
               min-height: 6rem;
            }
      }

      /* Estilos específicos para pantallas medianas (entre 601px y 991px de ancho, ej: tablets) */
      @media (min-width: 601px) and (max-width: 991px) {
          body {
              margin: 15px;
              font-size: 1em;
          }
          .container {
               padding: 25px;
               margin-bottom: 30px;
          }
           section {
               padding: 20px;
               margin-bottom: 25px;
           }
          h1 { font-size: 2.4em; }
          .form-title { font-size: 2em; margin-bottom: 25px; padding-bottom: 10px; }
          h2 { font-size: 1.9em; padding: 12px 0; margin-top: 25px; margin-bottom: 15px; }
          /* .form-section h2 styles are fine here */

          /* Ajuste tamaño y margen de h3 en entradas dinámicas en tablet */
          .victim-entry h3,
          .data954-entry h3 {
              font-size: 1.2em;
              margin-bottom: 1rem;
          }

          h3 { font-size: 1.6em; padding: 10px 0; margin-top: 20px; margin-bottom: 10px; }
          h4 { font-size: 1.3em; padding: 8px 0; margin-top: 15px; margin-bottom: 8px; }

          /* Lista de botones - muestra 2 columnas */
          ul li {
              width: calc(50% - 10px);
          }
           ul li a { /* Estilo para el enlace (a) dentro del li, actuando como botón en tablet */
              padding: 12px 20px;
              font-size: 1.05em;
           }
           ul li a img { /* Estilo para el icono dentro del enlace en tablet */
              width: 24px;
              margin-right: 12px;
           }

          /* Ajustes para la cabecera en tablets */
          header {
              border-radius: 12px;
              padding: 15px 10px;
              margin-bottom: 35px;
          }
          header .datos {
              font-size: 2em;
          }
          header .nav_1 a {
              margin: 0 12px;
          }
           /* Ajustes para la galería en tablets */
           .gallery {
               grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
               gap: 20px;
               margin-top: 20px;
           }
            .img-container {
               padding: 5px;
            }
            .img-container img:hover {
              transform: scale(1.04);
           }

           /* Ajustes para formularios en tablets */
           .form-container {
               padding: 25px;
           }
           /* Ajuste padding y margin-bottom de entradas dinámicas en tablet */
            .victim-entry,
           .data954-entry {
               padding: 15px;
               margin-bottom: 20px;
           }
            /* Ajuste margen separador hr en tablet */
           .victim-entry hr,
           .data954-entry hr {
               margin: 20px 0;
           }

           .form-section {
               margin-bottom: 2rem;
               padding-bottom: 1.5rem;
           }
           /* form-section h2 size adjusted above */
           .form-group {
               margin-bottom: 1rem; /* Reducido */
           }
           .form-group label {
               font-size: 0.875em;
               margin-bottom: 0.5rem;
           }
           .form-control, .form-select, .textarea {
               font-size: 1em;
               padding: 0.75rem;
           }
            .form-select {
               padding-right: 2.5rem;
               background-position: right 0.75rem center;
               background-size: 1rem;
            }
            .btn-primary, .btn-secondary {
               font-size: 1em;
               padding: 12px 20px;
            }
            .btn-primary .icon, .btn-secondary .icon {
               width: 1.2em;
               height: 1.2em;
               margin-right: 8px;
            }
            /* Ajuste grupo de botones del formulario en tablet */
            .button-group {
                 gap: 15px;
                 /* flex-grow, text-align, justify-content handled */
            }
            /* Ajuste botón agregar en tablet */
             .btn-secondary.add-button {
                 margin-top: 15px;
             }


            .preview-title {
               font-size: 1.2em;
               margin-bottom: 0.75rem;
            }
            #preview {
               font-size: 0.875em;
               min-height: 8rem;
            }

           /* Ajuste específico para el título #indes en tablets */
            #indes {
               font-size: 1.5em;
               margin-bottom: 20px;
               padding-bottom: 8px;
           }
            .linea-info {
               font-size: 0.9em;
           }
      }

      /* Estilos específicos para pantallas grandes (992px de ancho y más, ej: escritorios) */
      @media (min-width: 992px) {
          body {
              margin: 30px auto;
              max-width: 1200px;
              font-size: 1em;
          }
          .container {
              padding: 30px;
              margin-bottom: 40px;
          }
           section {
               padding: 30px;
               margin-bottom: 30px;
           }
           h1 { font-size: 2.8em; }
           .form-title { font-size: 2.2em; margin-bottom: 30px; padding-bottom: 15px; }
           h2 { font-size: 2.2em; padding: 15px 0; margin-top: 30px; margin-bottom: 20px; }
           /* .form-section h2 styles are fine here */

          /* Ajuste tamaño y margen de h3 en entradas dinámicas en escritorio */
           .victim-entry h3,
           .data954-entry h3 {
               font-size: 1.3em;
               margin-bottom: 1.2rem;
           }

           h3 { font-size: 1.8em; padding: 12px 0; margin-top: 25px; margin-bottom: 15px; }
           h4 { font-size: 1.5em; padding: 10px 0; margin-top: 20px; margin-bottom: 10px; }

          /* Lista de botones - muestra 3 columnas */
           ul li {
              width: calc(33.33% - 13.33px);
           }
           ul li a { /* Estilo para el enlace (a) dentro del li, actuando como botón en escritorio */
              padding: 15px 25px;
              font-size: 1.1em;
           }
           ul li a img { /* Estilo para el icono dentro del enlace en escritorio */
               width: 25px;
               margin-right: 15px;
           }

           /* Ajustes para la cabecera en escritorios */
           header {
               border-radius: 15px;
               padding: 20px 15px;
               margin-bottom: 45px;
           }
           header .datos {
               font-size: 2.2em;
           }
           header .nav_1 a {
               margin: 0 15px;
           }
           /* Ajustes para la galería en escritorios */
           .gallery {
               grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
               gap: 30px;
               margin-top: 25px;
           }
            .img-container {
               padding: 8px;
            }
            .img-container img:hover {
              transform: scale(1.05);
           }

           /* Ajustes para formularios en escritorios */
            .form-container {
                /* max-width already set */
            }
           /* Ajuste padding y margin-bottom de entradas dinámicas en escritorio */
            .victim-entry,
            .data954-entry {
                padding: 20px;
                margin-bottom: 30px;
            }
            /* Ajuste margen separador hr en escritorio */
            .victim-entry hr,
            .data954-entry hr {
                margin: 25px 0;
            }


            .funcionario-select {
               padding: 10px;
               font-size: 1em;
            }
            #listaFuncionarios, #consignasNovedades {
               font-size: 1em;
               padding: 12px;
               min-height: 120px;
            }
             #consignasNovedades {
              min-height: 150px;
           }
            /* Ajuste grupo de botones del formulario en escritorio */
            .button-group {
                 gap: 20px;
                 /* flex-grow, width, text-align, justify-content handled */
            }
            /* Ajuste botón agregar en escritorio */
            .btn-secondary.add-button {
                margin-top: 20px;
            }


            #indes {
               font-size: 1.6em;
               margin-bottom: 20px;
               padding-bottom: 8px;
           }
            .linea-info {
               font-size: 1em;
           }
      }
    </style>
</head>
<body>
    <div class="container form-container">
        <h1 class="form-title">Formulario Datos de Ley</h1>

        <form id="datos-ley-form">
            <div class="form-section">
                <h2>*Datos Generales*</h2>
                <div class="form-group">
                    <label for="direccion">Dirección:</label>
                    <input type="text" id="direccion" name="direccion" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="fecha">Fecha:</label>
                    <input type="date" id="fecha" name="fecha" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="hora">Hora:</label>
                    <input type="time" id="hora" name="hora" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="delito">Delito:</label>
                    <input type="text" id="delito" name="delito" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="Caracteristicas">Caracteristicas:</label>
                    <input type="text" id="Caracteristicas" name="Caracteristicas" class="form-control" required>
                </div>
            </div>

            <div class="form-section">
                <h2>Datos de la Víctima</h2>
                <div id="victimas-container">
                    </div>
                <button type="button" id="add-victima-button" class="btn-secondary add-button">
                     <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    Agregar Víctima
                </button>
            </div>

             <div class="form-section">
                <h2>Narración de los Hechos</h2>
                <div class="form-group">
                    <label for="narracion">Narración:</label>
                    <textarea id="narracion" name="narracion" class="form-control textarea" required></textarea>
                </div>
            </div>


            <div class="form-section">
                <h2>Datos del 954</h2>
                 <div id="data954-container">
                     </div>
                 <button type="button" id="add-data954-button" class="btn-secondary add-button">
                     <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    Agregar Datos del 954
                 </button>
            </div>


            <div class="form-section">
                <h2>Previsualización</h2>
                <div class="preview-container">
                    <p class="preview-title">Datos del Formulario:</p>
                    <textarea id="preview" readonly></textarea>
                </div>
                <div class="button-group mt-4">
                    <button type="button" id="copy-button" class="btn-primary">
                         <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                        Copiar Información
                    </button>
                    <button type="button" id="clear-button" class="btn-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0v-3a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v3"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                        Borrar Datos
                    </button>
                </div>
            </div>
        </form>
    </div>

    <script>
        // --- JavaScript para la lógica del formulario ---

        // Contadores para generar IDs únicos para múltiples entradas de víctimas y datos 954
        let victimEntryCount = 0;
        let data954EntryCount = 0;

        // Función para calcular la edad a partir de una fecha de nacimiento
        function calcularEdad(fechaNacimiento) {
            const fechaNac = new Date(fechaNacimiento);
            const hoy = new Date();
            let edad = hoy.getFullYear() - fechaNac.getFullYear();
            const mes = hoy.getMonth() - fechaNac.getMonth();
            // Ajusta la edad si el cumpleaños no ha pasado todavía este año
            if (mes < 0 || (mes === 0 && hoy.getDate() < fechaNac.getDate())) {
                edad--;
            }
            // Asegura que la edad no sea negativa (en caso de fechas futuras)
            return edad >= 0 ? edad : 0;
        }

        // Función para actualizar el campo de edad asociado a un campo de fecha de nacimiento
        function actualizarEdadEnCampo(fechaInput, edadInput) {
            // Verifica que ambos campos existan y que el campo de fecha tenga un valor
            if (fechaInput && edadInput && fechaInput.value) {
                const edad = calcularEdad(fechaInput.value);
                edadInput.value = edad; // Establece la edad calculada en el campo de edad
            } else if (edadInput) {
                edadInput.value = ''; // Si no hay fecha, limpia el campo de edad
            }
        }

         // Función para adjuntar event listeners a una nueva entrada dinámica (víctima o datos954)
         function attachEntryListeners(entryElement, type) {
            // Adjuntar listener 'change' a todos los campos de fecha dentro de esta entrada
            const fechaInputs = entryElement.querySelectorAll('.fecha-input');
            fechaInputs.forEach(input => {
                input.addEventListener('change', (event) => {
                    // Encuentra el elemento padre de la entrada (víctima o datos954)
                    const entry = event.target.closest('.victim-entry, .data954-entry');
                    let edadInput;
                    // Busca el campo de edad dentro de la misma entrada padre usando su clase
                    edadInput = entry.querySelector('.edad-input');
                    // Actualiza el campo de edad basado en la fecha cambiada
                    actualizarEdadEnCampo(event.target, edadInput);
                    // Disparar evento 'input' en el formulario principal para guardar y previsualizar
                    document.getElementById('datos-ley-form').dispatchEvent(new Event('input', { bubbles: true }));
                });
                 // Asegurarse de que la edad se calcule si ya hay una fecha al cargar (útil al cargar datos guardados)
                 const entry = input.closest('.victim-entry, .data954-entry');
                 let edadInput;
                 // Busca el campo de edad dentro de la misma entrada padre usando su clase
                 edadInput = entry.querySelector('.edad-input');
                 actualizarEdadEnCampo(input, edadInput);
            });

            // Adjuntar listener 'click' al botón de eliminar dentro de esta entrada
            const removeButton = entryElement.querySelector('.remove-button');
            if (removeButton) {
                removeButton.addEventListener('click', () => {
                    // Pide confirmación antes de eliminar
                    if (confirm(`¿Estás seguro de que deseas eliminar esta entrada de ${type === 'victima' ? 'Víctima' : 'Datos del 954'}?`)) {
                         entryElement.remove(); // Elimina el elemento de la entrada del DOM
                         updateEntryNumbers(type); // Actualiza la numeración de las entradas restantes
                         // Disparar evento 'input' en el formulario principal para guardar y previsualizar
                         document.getElementById('datos-ley-form').dispatchEvent(new Event('input', { bubbles: true }));
                    }
                });
            }

             // Adjuntar listener 'input' a todos los campos de entrada/selección dentro de esta entrada
             // Esto asegura que la previsualización y el guardado se actualicen con cada cambio
             const formControls = entryElement.querySelectorAll('.form-control, .form-select');
             formControls.forEach(control => {
                 control.addEventListener('input', () => {
                     // Disparar evento 'input' en el formulario principal para guardar y previsualizar
                     document.getElementById('datos-ley-form').dispatchEvent(new Event('input', { bubbles: true }));
                 });
             });
         }


        // Función para agregar una nueva entrada de "Datos de la Víctima" al contenedor
        function addVictimEntry(data = null) {
            const container = document.getElementById('victimas-container');
            if (!container) return; // Sale si el contenedor no existe

            // Usa el contador actual como índice único para IDs y el atributo 'for' de las etiquetas
            const index = victimEntryCount++;

            // Plantilla HTML para una entrada de "Datos de la Víctima" con IDs y 'for' únicos
            let entryHTML = `
                <div class="victim-entry" data-entry-type="victima">
                    <h3>Víctima <span class="entry-number"></span></h3>
                    <div class="form-group">
                        <label for="nombre-victima-${index}">Nombre:</label>
                        <input type="text" id="nombre-victima-${index}" name="nombre-victima[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="cedula-victima-${index}">Cédula:</label>
                        <input type="number" id="cedula-victima-${index}" name="cedula-victima[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="fecha-expedicion-victima-${index}">Fecha de Expedición:</label>
                        <input type="date" id="fecha-expedicion-victima-${index}" name="fecha-expedicion-victima[]" class="form-control fecha-input" required>
                    </div>
                    <div class="form-group">
                        <label for="lugar-expedicion-victima-${index}">Lugar de Expedición:</label>
                        <input type="text" id="lugar-expedicion-victima-${index}" name="lugar-expedicion-victima[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="natural-victima-${index}">Natural de:</label>
                        <input type="text" id="natural-victima-${index}" name="natural-victima[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="fecha-nacimiento-victima-${index}">Fecha de Nacimiento:</label>
                        <input type="date" id="fecha-nacimiento-victima-${index}" name="fecha-nacimiento-victima[]" class="form-control fecha-input" required>
                    </div>
                    <div class="form-group">
                        <label for="edad-victima-${index}">Edad:</label>
                        <input type="text" id="edad-victima-${index}" name="edad-victima[]" class="form-control edad-input" readonly>
                    </div>
                    <div class="form-group">
                        <label for="hijo-de-victima-${index}">Hijo de:</label>
                        <input type="text" id="hijo-de-victima-${index}" name="hijo-de-victima[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="estado-civil-victima-${index}">Estado Civil:</label>
                        <select id="estado-civil-victima-${index}" name="estado-civil-victima[]" class="form-select" required>
                            <option value="">Seleccione...</option>
                            <option value="Soltero">Soltero</option>
                            <option value="Casado">Casado</option>
                            <option value="Divorciado">Divorciado</option>
                            <option value="Viudo">Viudo</option>
                            <option value="Union Libre">Unión Libre</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="estudios-victima-${index}">Estudios:</label>
                        <input type="text" id="estudios-victima-${index}" name="estudios-victima[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="ocupacion-victima-${index}">Ocupación:</label>
                        <input type="text" id="ocupacion-victima-${index}" name="ocupacion-victima[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="direccion-residencia-victima-${index}">Dirección de Residencia:</label>
                        <input type="text" id="direccion-residencia-victima-${index}" name="direccion-residencia-victima[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="barrio-victima-${index}">Barrio:</label>
                        <input type="text" id="barrio-victima-${index}" name="barrio-victima[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="municipio-victima-${index}">Municipio:</label>
                        <input type="text" id="municipio-victima-${index}" name="municipio-victima[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="telefono-victima-${index}">Teléfono:</label>
                        <input type="tel" id="telefono-victima-${index}" name="telefono-victima[]" class="form-control" required>
                    </div>
                    <button type="button" class="btn-secondary remove-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0v-3a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v3"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                        Eliminar Víctima
                    </button>
                    <hr> </div>
            `;

             // Crea un elemento temporal para parsear el HTML y obtener el primer nodo hijo
             const entryElement = document.createElement('div');
             entryElement.innerHTML = entryHTML.trim();
             const newEntry = entryElement.firstChild; // Este es el div.victim-entry

            // Si se proporciona data (al cargar desde localStorage), llenar los campos
            if (data) {
                 const inputs = newEntry.querySelectorAll('input, select, textarea');
                 inputs.forEach(input => {
                      // Obtiene el nombre base del campo (sin '[]')
                      const baseName = input.name.replace('[]', '');
                      // Si existe un valor para este campo en los datos cargados, asignarlo
                     if (data[baseName] !== undefined) {
                          input.value = data[baseName];
                     }
                 });
            }

            // Adjuntar listeners a la nueva entrada creada
            attachEntryListeners(newEntry, 'victima');

            // Actualizar la numeración visible de las entradas y agregar la nueva entrada al DOM
            container.appendChild(newEntry);
            updateEntryNumbers('victima');

             // Si no se proporcionó data (es una nueva entrada manual), enfocar el primer campo (opcional)
             if (!data) {
                 const firstInput = newEntry.querySelector('.form-control, .form-select');
                 if (firstInput) {
                     //firstInput.focus(); // Comentado para evitar auto-focus al añadir
                 }
             }
        }

        // Función para agregar una nueva entrada de "Datos del 954" al contenedor
        function addData954Entry(data = null) {
            const container = document.getElementById('data954-container');
            if (!container) return; // Sale si el contenedor no existe

            // Usa el contador actual como índice único para IDs y el atributo 'for' de las etiquetas
            const index = data954EntryCount++;

             // Plantilla HTML para una entrada de "Datos del 954" con IDs y 'for' únicos
             let entryHTML = `
                 <div class="data954-entry" data-entry-type="data954">
                    <h3>Datos del 954 <span class="entry-number"></span></h3>
                    <div class="form-group">
                        <label for="nombre-954-${index}">Nombre:</label>
                        <input type="text" id="nombre-954-${index}" name="nombre-954[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="cedula-954-${index}">Cédula:</label>
                        <input type="number" id="cedula-954-${index}" name="cedula-954[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="fecha-expedicion-954-${index}">Fecha de Expedición:</label>
                        <input type="date" id="fecha-expedicion-954-${index}" name="fecha-expedicion-954[]" class="form-control fecha-input" required>
                    </div>
                    <div class="form-group">
                        <label for="lugar-expedicion-954-${index}">Lugar de Expedición:</label>
                        <input type="text" id="lugar-expedicion-954-${index}" name="lugar-expedicion-954[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="natural-954-${index}">Natural de:</label>
                        <input type="text" id="natural-954-${index}" name="natural-954[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="fecha-nacimiento-954-${index}">Fecha de Nacimiento:</label>
                        <input type="date" id="fecha-nacimiento-954-${index}" name="fecha-nacimiento-954[]" class="form-control fecha-input" required>
                    </div>
                    <div class="form-group">
                        <label for="edad-954-${index}">Edad:</label>
                        <input type="text" id="edad-954-${index}" name="edad-954[]" class="form-control edad-input" readonly>
                    </div>
                    <div class="form-group">
                        <label for="hijo-de-954-${index}">Hijo de:</label>
                        <input type="text" id="hijo-de-954-${index}" name="hijo-de-954[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="estado-civil-954-${index}">Estado Civil:</label>
                        <select id="estado-civil-954-${index}" name="estado-civil-954[]" class="form-select" required>
                            <option value="">Seleccione...</option>
                            <option value="Soltero">Soltero</option>
                            <option value="Casado">Casado</option>
                            <option value="Divorciado">Divorciado</option>
                            <option value="Viudo">Viudo</option>
                            <option value="Union Libre">Unión Libre</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="estudios-954-${index}">Estudios:</label>
                        <input type="text" id="estudios-954-${index}" name="estudios-954[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="ocupacion-954-${index}">Ocupación:</label>
                        <input type="text" id="ocupacion-954-${index}" name="ocupacion-954[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="direccion-residencia-954-${index}">Dirección de Residencia:</label>
                        <input type="text" id="direccion-residencia-954-${index}" name="direccion-residencia-954[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="barrio-954-${index}">Barrio:</label>
                        <input type="text" id="barrio-954-${index}" name="barrio-954[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="municipio-954-${index}">Municipio:</label>
                        <input type="text" id="municipio-954-${index}" name="municipio-954[]" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="telefono-954-${index}">Teléfono:</label>
                        <input type="tel" id="telefono-954-${index}" name="telefono-954[]" class="form-control" required>
                    </div>
                     <button type="button" class="btn-secondary remove-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0v-3a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v3"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                        Eliminar Datos del 954
                    </button>
                    <hr> </div>
             `;

             // Crea un elemento temporal para parsear el HTML y obtener el primer nodo hijo
             const entryElement = document.createElement('div');
             entryElement.innerHTML = entryHTML.trim();
             const newEntry = entryElement.firstChild; // Este es el div.data954-entry

            // Si se proporciona data (al cargar desde localStorage), llenar los campos
            if (data) {
                 const inputs = newEntry.querySelectorAll('input, select, textarea');
                 inputs.forEach(input => {
                     // Obtiene el nombre base del campo (sin '[]')
                     const baseName = input.name.replace('[]', '');
                     // Si existe un valor para este campo en los datos cargados, asignarlo
                     if (data[baseName] !== undefined) {
                          input.value = data[baseName];
                     }
                 });
            }

            // Adjuntar listeners a la nueva entrada creada
            attachEntryListeners(newEntry, 'data954');

            // Actualizar la numeración visible de las entradas y agregar la nueva entrada al DOM
            container.appendChild(newEntry);
            updateEntryNumbers('data954');

             // Si no se proporcionó data (es una nueva entrada manual), enfocar el primer campo (opcional)
             if (!data) {
                 const firstInput = newEntry.querySelector('.form-control, .form-select');
                 if (firstInput) {
                     //firstInput.focus(); // Comentado para evitar auto-focus al añadir
                 }
             }
        }

        // Función para actualizar la numeración visible de las entradas dinámicas (Víctima 1, Datos del 954 2, etc.)
        function updateEntryNumbers(type) {
            const container = document.getElementById(`${type}s-container`);
            if (!container) return; // Sale si el contenedor no existe
            // Selecciona todas las entradas del tipo especificado dentro del contenedor
            const entries = container.querySelectorAll(`.${type}-entry`);
            // Itera sobre las entradas y actualiza el número visible
            entries.forEach((entry, index) => {
                const numberSpan = entry.querySelector('.entry-number');
                if (numberSpan) {
                    numberSpan.textContent = index + 1; // El índice es base 0, sumamos 1 para la numeración visible
                }
            });
        }


        // Función para obtener el nombre del mes en español a partir de su número (0-11)
        function obtenerNombreMes(numeroMes) {
            const meses = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
            return meses[numeroMes];
        }

        // Función principal para generar el texto de previsualización a partir de los datos del formulario
        function generarPrevisualizacion() {
            const form = document.getElementById('datos-ley-form');
            const preview = document.getElementById('preview');
            let previewText = "FORMULARIO DATOS DE LEY\n\n"; // Encabezado de la previsualización

            // --- Procesar Datos Generales ---
            previewText += "DATOS GENERALES\n";
            // Lista de IDs de los campos generales a incluir en la previsualización
            const generalFields = ["direccion", "fecha", "hora", "delito", "Caracteristicas"]; // Narración se maneja aparte
            generalFields.forEach(campoId => {
                 const elemento = document.getElementById(campoId);
                 if (elemento) {
                     // Intenta obtener el texto de la etiqueta asociada, si no usa el nombre del campo
                     let labelText = document.querySelector(`label[for="${campoId}"]`);
                     let label = labelText ? labelText.textContent : elemento.name + ":";
                     let valor = elemento.value;

                      // Formatea las fechas para que se muestren en formato legible en español
                      if (campoId === "fecha" && valor) {
                           const [anio, mesStr, diaStr] = valor.split('-').map(num => parseInt(num, 10));
                           const fechaObj = new Date(anio, mesStr - 1, diaStr); // mesStr - 1 porque los meses en Date son 0-indexados
                           if (!isNaN(fechaObj.getTime())) { // Verifica si la fecha es válida
                               const formattedDia = fechaObj.getDate();
                               const formattedMes = obtenerNombreMes(fechaObj.getMonth());
                               const formattedAnio = fechaObj.getFullYear();
                               valor = `${formattedDia} de ${formattedMes} de ${formattedAnio}`;
                            } else {
                                valor = "Fecha inválida"; // Mensaje si la fecha no es válida
                            }
                       }

                     // Añade la etiqueta en mayúsculas y el valor al texto de previsualización
                     previewText += `    ${label.toUpperCase()} ${valor || ''}\n`;
                 }
            });
            previewText += "\n"; // Añade una línea en blanco al final de la sección

            // --- Procesar Datos de la Víctima ---
            const victimEntries = document.querySelectorAll('#victimas-container .victim-entry');
            // Itera sobre cada entrada de víctima encontrada
            victimEntries.forEach((entry, index) => {
                previewText += `DATOS DE LA VÍCTIMA ${index + 1}\n`; // Título para cada víctima
                // Lista de nombres de los campos de víctima a incluir
                const victimFields = [
                    "nombre-victima", "cedula-victima", "fecha-expedicion-victima", "lugar-expedicion-victima",
                    "natural-victima", "fecha-nacimiento-victima", "edad-victima", "hijo-de-victima",
                    "estado-civil-victima", "estudios-victima", "ocupacion-victima", "direccion-residencia-victima",
                    "barrio-victima", "municipio-victima", "telefono-victima"
                ];
                 // Itera sobre los campos de cada víctima
                 victimFields.forEach(fieldName => {
                     // Busca el input/select correspondiente dentro de la entrada actual
                     const input = entry.querySelector(`[name="${fieldName}[]"]`);
                     if (input) {
                          // Intenta obtener el texto de la etiqueta asociada, si no usa el nombre del campo formateado
                          let labelText = entry.querySelector(`label[for="${input.id}"]`);
                          let label = labelText ? labelText.textContent.trim() : fieldName.replace('-', ' ') + ":";
                          let valor = input.value;

                          // Formatea las fechas para que se muestren en formato legible en español
                          if (['fecha-expedicion-victima', 'fecha-nacimiento-victima'].includes(fieldName) && valor) {
                               const [anio, mesStr, diaStr] = valor.split('-').map(num => parseInt(num, 10));
                               const fechaObj = new Date(anio, mesStr - 1, diaStr); // mesStr - 1 porque los meses en Date son 0-indexados
                               if (!isNaN(fechaObj.getTime())) { // Verifica si la fecha es válida
                                   const formattedDia = fechaObj.getDate();
                                   const formattedMes = obtenerNombreMes(fechaObj.getMonth());
                                   const formattedAnio = fechaObj.getFullYear();
                                   valor = `${formattedDia} de ${formattedMes} de ${formattedAnio}`;
                                } else {
                                    valor = "Fecha inválida"; // Mensaje si la fecha no es válida
                                }
                          } else if (fieldName === 'edad-victima') {
                             // El campo de edad ya debe tener el valor calculado por el listener 'change' de la fecha
                             valor = input.value;
                          }

                          // Añade la etiqueta en mayúsculas y el valor al texto de previsualización
                          previewText += `    ${label.toUpperCase()} ${valor || ''}\n`;
                     }
                 });
                previewText += "\n"; // Añade una línea en blanco al final de cada sección de víctima
            });

             // --- Procesar Narración de los Hechos ---
             previewText += "NARRACIÓN DE LOS HECHOS\n"; // Título de la sección
             const narracionElement = document.getElementById('narracion');
             if(narracionElement) {
                 // Añade el valor del textarea de narración al texto de previsualización
                 previewText += `    ${narracionElement.value || ''}\n`;
             }
             previewText += "\n"; // Añade una línea en blanco al final de la sección

            // --- Procesar Datos del 954 ---
            const data954Entries = document.querySelectorAll('#data954-container .data954-entry');
            // Itera sobre cada entrada de datos del 954 encontrada
            data954Entries.forEach((entry, index) => {
                previewText += `DATOS DEL 954 ${index + 1}\n`; // Título para cada entrada del 954
                // Lista de nombres de los campos de datos del 954 a incluir
                const data954Fields = [
                    "nombre-954", "cedula-954", "fecha-expedicion-954", "lugar-expedicion-954",
                    "natural-954", "fecha-nacimiento-954", "edad-954", "hijo-de-954",
                    "estado-civil-954", "estudios-954", "ocupacion-954", "direccion-residencia-954",
                    "barrio-954", "municipio-954", "telefono-954"
                ];
                 // Itera sobre los campos de cada entrada del 954
                 data954Fields.forEach(fieldName => {
                      // Busca el input/select correspondiente dentro de la entrada actual
                      const input = entry.querySelector(`[name="${fieldName}[]"]`);
                      if (input) {
                           // Intenta obtener el texto de la etiqueta asociada, si no usa el nombre del campo formateado
                           let labelText = entry.querySelector(`label[for="${input.id}"]`);
                           let label = labelText ? labelText.textContent.trim() : fieldName.replace('-', ' ') + ":";
                           let valor = input.value;

                            // Formatea las fechas para que se muestren en formato legible en español
                            if (['fecha-expedicion-954', 'fecha-nacimiento-954'].includes(fieldName) && valor) {
                                const [anio, mesStr, diaStr] = valor.split('-').map(num => parseInt(num, 10));
                                const fechaObj = new Date(anio, mesStr - 1, diaStr); // mesStr - 1 porque los meses en Date son 0-indexados
                                if (!isNaN(fechaObj.getTime())) { // Verifica si la fecha es válida
                                    const formattedDia = fechaObj.getDate();
                                    const formattedMes = obtenerNombreMes(fechaObj.getMonth());
                                    const formattedAnio = fechaObj.getFullYear();
                                    valor = `${formattedDia} de ${formattedMes} de ${formattedAnio}`;
                                } else {
                                    valor = "Fecha inválida"; // Mensaje si la fecha no es válida
                                }
                            } else if (fieldName === 'edad-954') {
                              // El campo de edad ya debe tener el valor calculado por el listener 'change' de la fecha
                              valor = input.value;
                            }

                           // Añade la etiqueta en mayúsculas y el valor al texto de previsualización
                           previewText += `    ${label.toUpperCase()} ${valor || ''}\n`;
                      }
                 });
                previewText += "\n"; // Añade una línea en blanco al final de cada sección de datos del 954
            });

            // Asigna el texto generado al valor del textarea de previsualización
            preview.value = previewText.trim();
        }

        // Función para guardar los datos del formulario en el almacenamiento local del navegador
        function guardarDatosFormulario() {
            const form = document.getElementById('datos-ley-form');
            const data = {}; // Objeto para almacenar los datos del formulario

            // --- Recopilar Campos Generales ---
            const generalFields = ["direccion", "fecha", "hora", "delito", "Caracteristicas", "narracion"];
            generalFields.forEach(field => {
                const element = document.getElementById(field);
                if (element) {
                    data[field] = element.value; // Guarda el valor del campo
                }
            });

            // --- Recopilar Datos de la Víctima (Múltiples Entradas) ---
            data.victimas = []; // Inicializa un array para las víctimas
            const victimEntries = document.querySelectorAll('#victimas-container .victim-entry');
            // Itera sobre cada entrada de víctima en el DOM
            victimEntries.forEach(entry => {
                const victimData = {}; // Objeto para los datos de una sola víctima
                 const victimFields = [
                    "nombre-victima", "cedula-victima", "fecha-expedicion-victima", "lugar-expedicion-victima",
                    "natural-victima", "fecha-nacimiento-victima", "edad-victima", "hijo-de-victima",
                    "estado-civil-victima", "estudios-victima", "ocupacion-victima", "direccion-residencia-victima",
                    "barrio-victima", "municipio-victima", "telefono-victima"
                ];
                 // Itera sobre los campos dentro de la entrada de víctima actual
                 victimFields.forEach(fieldName => {
                      // Busca el input/select correspondiente dentro de la entrada
                      const input = entry.querySelector(`[name="${fieldName}[]"]`);
                      if (input) {
                           victimData[fieldName] = input.value; // Guarda el valor del campo
                      }
                 });
                // Añade el objeto de datos de la víctima al array de víctimas
                data.victimas.push(victimData);
            });

             // --- Recopilar Datos del 954 (Múltiples Entradas) ---
             data.datos954 = []; // Inicializa un array para los datos del 954
             const data954Entries = document.querySelectorAll('#data954-container .data954-entry');
             // Itera sobre cada entrada de datos del 954 en el DOM
             data954Entries.forEach(entry => {
                 const data954Data = {}; // Objeto para los datos de una sola entrada del 954
                  const data954Fields = [
                    "nombre-954", "cedula-954", "fecha-expedicion-954", "lugar-expedicion-954",
                    "natural-954", "fecha-nacimiento-954", "edad-954", "hijo-de-954",
                    "estado-civil-954", "estudios-954", "ocupacion-954", "direccion-residencia-954",
                    "barrio-954", "municipio-954", "telefono-954"
                ];
                  // Itera sobre los campos dentro de la entrada de datos del 954 actual
                  data954Fields.forEach(fieldName => {
                      // Busca el input/select correspondiente dentro de la entrada
                      const input = entry.querySelector(`[name="${fieldName}[]"]`);
                       if (input) {
                           data954Data[fieldName] = input.value; // Guarda el valor del campo
                       }
                  });
                 // Añade el objeto de datos del 954 al array correspondiente
                 data.datos954.push(data954Data);
             });

            // Guarda el objeto de datos completo como una cadena JSON en localStorage
            localStorage.setItem('datosLeyForm', JSON.stringify(data));
        }

        // Función para cargar los datos del formulario desde el almacenamiento local al cargar la página
        function cargarDatosFormulario() {
            // Intenta obtener los datos guardados de localStorage
            const data = localStorage.getItem('datosLeyForm');
            // Obtiene los contenedores de las entradas dinámicas
            const victimContainer = document.getElementById('victimas-container');
            const data954Container = document.getElementById('data954-container');

            // Limpia los contenedores actuales y reinicia los contadores
            if(victimContainer) victimContainer.innerHTML = '';
            victimEntryCount = 0;
            if(data954Container) data954Container.innerHTML = '';
            data954EntryCount = 0;


            if (data) {
                try {
                    // Parsea la cadena JSON a un objeto JavaScript
                    const formData = JSON.parse(data);

                    // --- Cargar Campos Generales ---
                    const generalFields = ["direccion", "fecha", "hora", "delito", "Caracteristicas", "narracion"];
                     generalFields.forEach(field => {
                         const element = document.getElementById(field);
                         // Si el elemento existe y hay datos guardados para él, asigna el valor
                         if (element && formData[field] !== undefined) {
                             element.value = formData[field];
                         }
                     });


                    // --- Cargar Entradas de Víctima ---
                    // Verifica si existen datos de víctimas guardados y si es un array
                    if (formData.victimas && Array.isArray(formData.victimas)) {
                         if (formData.victimas.length > 0) {
                             // Si hay víctimas guardadas, añade una entrada por cada una y llena sus datos
                            formData.victimas.forEach(victimData => {
                                addVictimEntry(victimData);
                            });
                         } else {
                             // Si el array guardado está vacío, añade una entrada vacía por defecto
                             addVictimEntry();
                         }
                    } else {
                         // Si no existe el array de víctimas en los datos guardados, añade una entrada vacía por defecto
                         addVictimEntry();
                    }


                    // --- Cargar Entradas del 954 ---
                     // Verifica si existen datos del 954 guardados y si es un array
                     if (formData.datos954 && Array.isArray(formData.datos954)) {
                        if (formData.datos954.length > 0) {
                            // Si hay datos del 954 guardados, añade una entrada por cada uno y llena sus datos
                            formData.datos954.forEach(data954Data => {
                                addData954Entry(data954Data);
                            });
                        } else {
                            // Si el array guardado está vacío, añade una entrada vacía por defecto
                            addData954Entry();
                        }
                    } else {
                         // Si no existe el array de datos954 en los datos guardados, añade una entrada vacía por defecto
                         addData954Entry();
                    }


                } catch (e) {
                    // Si ocurre un error al parsear o cargar los datos, lo registra en la consola
                    console.error("Error cargando datos del formulario:", e);
                    // Y se asegura de que haya al menos una entrada vacía por defecto para cada tipo
                    addVictimEntry();
                    addData954Entry();
                }
            } else {
                 // Si no hay datos guardados en localStorage en absoluto, añade una entrada vacía por defecto para cada tipo
                 addVictimEntry();
                 addData954Entry();
            }
        }


        // Event listener principal en el formulario que se activa con cualquier cambio en sus campos
        document.getElementById('datos-ley-form').addEventListener('input', () => {
             guardarDatosFormulario(); // Guarda los datos
             generarPrevisualizacion(); // Actualiza la previsualización
        });


        // Event listener para el botón de copiar la previsualización al portapapeles
        document.getElementById('copy-button').addEventListener('click', () => {
            const previewTextarea = document.getElementById('preview');
            // Verifica si el textarea de previsualización existe y tiene contenido
            if (previewTextarea && previewTextarea.value) {
                 // Selecciona el texto en el textarea
                 previewTextarea.select();
                 // Para dispositivos móviles, asegura que todo el texto esté seleccionado
                 previewTextarea.setSelectionRange(0, 99999);
                 try {
                      // Intenta usar la API moderna del portapapeles (más segura y recomendada)
                      navigator.clipboard.writeText(previewTextarea.value)
                         .then(() => {
                              // Muestra un mensaje de éxito al usuario
                              alert("¡Información copiada al portapapeles!");
                          })
                         .catch(err => {
                              // Si la API falla, intenta el método antiguo
                              console.error('Error al copiar con API:', err);
                              document.execCommand('copy');
                              alert("¡Información copiada! (método alternativo)");
                          });
                 } catch (err) {
                      // Fallback para navegadores muy antiguos que no soportan la API ni execCommand
                      try {
                          document.execCommand('copy');
                          alert("¡Información copiada! (método antiguo)");
                      } catch (e) {
                           console.error('Error al copiar con execCommand:', e);
                           alert("Error al copiar la información. Intenta copiar manualmente.");
                      }
                 }
            } else {
                 // Muestra un mensaje si no hay contenido para copiar
                 alert("No hay información para copiar.");
            }
             // Deselecciona el texto después de copiar
             window.getSelection().removeAllRanges();
        });

        // Event listener para el botón de borrar todos los datos del formulario
        document.getElementById('clear-button').addEventListener('click', () => {
             // Pide confirmación antes de borrar
             if (confirm("¿Estás seguro de que deseas borrar todos los datos del formulario?")) {
                 // Elimina los datos guardados de localStorage
                 localStorage.removeItem('datosLeyForm');
                 const form = document.getElementById('datos-ley-form');
                 // Limpia los campos generales
                 const generalFields = ["direccion", "fecha", "hora", "delito", "Caracteristicas", "narracion"];
                 generalFields.forEach(field => {
                     const element = document.getElementById(field);
                     if(element) element.value = '';
                 });

                 // Limpia y restablece las entradas dinámicas de víctimas
                 const victimContainer = document.getElementById('victimas-container');
                 if(victimContainer) victimContainer.innerHTML = '';
                 victimEntryCount = 0; // Reinicia el contador
                 addVictimEntry(); // Añade una entrada vacía por defecto

                 // Limpia y restablece las entradas dinámicas de datos del 954
                 const data954Container = document.getElementById('data954-container');
                 if(data954Container) data954Container.innerHTML = '';
                 data954EntryCount = 0; // Reinicia el contador
                 addData954Entry(); // Añade una entrada vacía por defecto

                 // Regenera la previsualización para mostrar que está vacía
                 generarPrevisualizacion();
                 //alert("¡Datos del formulario borrados!"); // Opcional: mostrar confirmación
             }
        });

        // --- Inicialización al cargar la página ---
        // Este evento se dispara cuando todo el DOM ha sido completamente cargado y parseado
        document.addEventListener('DOMContentLoaded', () => {
             // Adjuntar listeners a los botones de agregar (estos botones son estáticos en el HTML)
             const addVictimaButton = document.getElementById('add-victima-button');
             if(addVictimaButton) addVictimaButton.addEventListener('click', () => addVictimEntry()); // Al hacer clic, añade una nueva entrada de víctima

             const addData954Button = document.getElementById('add-data954-button');
             if(addData954Button) addData954Button.addEventListener('click', () => addData954Entry()); // Al hacer clic, añade una nueva entrada de datos del 954

             // Cargar datos guardados desde localStorage o añadir entradas vacías por defecto si no hay datos
             cargarDatosFormulario();

             // Generar la previsualización inicial al cargar la página
             generarPrevisualizacion();
        });


    </script>
</body>
</html>
